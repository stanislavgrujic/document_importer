{"version":3,"sources":["api/index.ts","api/transformers/index.ts","api/seniorities.ts","pages/common/Loader.tsx","pages/search/Markdown.tsx","pages/search/Video.tsx","pages/search/SearchResult.tsx","pages/common/layout.ts","pages/knowledge-block/index.tsx","pages/search/index.tsx","pages/common/util.ts","pages/notes/index.tsx","api/token.ts","pages/token/index.tsx","pages/note-editor/index.tsx","App.tsx","index.tsx"],"names":["api","get","Promise","reject","post","put","delete","makeApi","token","axios","create","baseURL","window","location","host","paramsSerializer","qs","stringify","headers","Authorization","fetchTopics","then","response","data","fetchKnowledgeBlock","id","encodeURI","saveKnowledgeBlock","block","updateKnowledgeBlock","getVotes","transformTopics","result","topicList","forEach","topic","parentId","parentIndex","findIndex","item","undefined","splice","title","trim","depth","push","seniorities","Loader","loadingState","children","withTokenLink","to","Container","styled","div","Markdown","memo","input","dangerouslySetInnerHTML","__html","sanitize","marked","VideoContainer","Overlay","timeToSeconds","split","hours","minutes","seconds","parseInt","Video","sourceLink","timePeriod","useState","showVideo","setShowVideo","overlayClickHandler","useCallback","Infinity","start","end","parseTime","url","parsedUrl","URL","match","search","parse","slice","v","extractId","player","useRef","pausedOnce","handleProgress","e","playedSeconds","current","getInternalPlayer","pauseVideo","ref","controls","onProgress","onClick","Subtitle","p","SpreadContainer","Breadcrumbs","Metadata","span","SearchResult","vote","localVote","setLocalVote","useEffect","handleUpvote","handleDownvote","attributes","semantics","path","map","join","sourceAuthor","text","includes","upVotes","downVotes","disabled","StyledForm","form","StyledLabel","label","StyledSelect","select","StyledTextArea","textarea","StyledInput","KnowledgeBlockComponent","votes","useLocation","knowledgeBlock","setKnowledgeBlock","setLoadingState","catch","console","error","find","knowledgeBlockId","Search","seniority","searchResults","setSearchResults","params","level","toUpperCase","knowledgeBlockList","fetchSearchResults","length","key","handleChange","updater","currentTarget","value","ClearButton","button","Notes","history","useHistory","topics","setTopics","selectedTopic","setSelectedTopic","selectedSeniority","setSelectedSeniority","setVotes","handleSubmit","preventDefault","queryObj","Object","entries","clearForm","onSubmit","onChange","repeat","getSavedToken","localStorage","getItem","savedToken","TokenPage","setToken","handleSave","setItem","saveToken","replace","href","target","rel","type","CreateNote","setTitle","setText","category","setCategory","toLowerCase","request","payload","toString","jwtDecode","name","GlobalStyle","createGlobalStyle","ReactDOM","render","component","document","getElementById"],"mappings":"4OAmBIA,EAAwC,CAC1CC,IAAK,kBAAMC,QAAQC,UACnBC,KAAM,kBAAMF,QAAQC,UACpBE,IAAK,kBAAMH,QAAQC,UACnBG,OAAQ,kBAAMJ,QAAQC,WAGXI,EAAU,SAACC,GACtBR,EAAMS,IAAMC,OAAO,CACjBC,QAAQ,UAAD,OAAYC,OAAOC,SAASC,KAA5B,QACPC,iBAAkBC,IAAGC,UACrBC,QAAS,CACPC,cAAc,UAAD,OAAYX,OAKlBY,EAAc,kBACzBpB,EAAIC,IAAoB,UAAUoB,MAAK,SAACC,GAAD,OAAcA,EAASC,SAYnDC,EAAsB,SAACC,GAAD,OACjCzB,EACGC,IADH,0BAC0CyB,UAAUD,KACjDJ,MAAK,SAACC,GAAD,OAAcA,EAASC,SAEpBI,EAAqB,SAACC,GAAD,OAChC5B,EAAII,KAAyC,kBAAmBwB,IAErDC,EAAuB,SAACD,GAAD,OAClC5B,EAAIK,IAAuC,kBAAmBuB,IAOnDE,EAAW,kBACtB9B,EAAIC,IAAW,eAAeoB,MAAK,SAACC,GAAD,OAAcA,EAASC,S,QC5D/CQ,EAAkB,SAACT,GAC9B,IAAMU,EAAuB,GAwB7B,OAtBAV,EAASW,UAAUC,SAAQ,SAACC,GAC1B,GAAKA,EAAMC,SAAX,CAUA,IAAMC,EAAcL,EAAOM,WAAU,SAACC,GAAD,OAAUA,EAAKd,KAAOU,EAAMC,iBAE7CI,IAAhBH,GACFL,EAAOS,OAAOJ,EAAc,EAAG,EAA/B,eACKF,EADL,CAEEO,MAAOP,EAAMO,MAAMC,OACnBC,MAAOZ,EAAOK,GAAaO,MAAQ,UAfrCZ,EAAOa,KAAP,eACKV,EADL,CAEEO,MAAOP,EAAMO,MAAMC,OACnBC,MAAO,QAiBNZ,GC/BIc,EAAc,CAAC,QAAS,SAAU,YCUlCC,EAAS,SAAC,GAIH,IAHlBC,EAGiB,EAHjBA,aACAC,EAEiB,EAFjBA,SACAC,EACiB,EADjBA,cAEA,OACE,oCACoB,YAAjBF,EACCC,EAEA,2BACE,4BACoB,YAAjBD,EAA6B,aAAe,uBAE7B,UAAjBA,GAA4BE,GAC3B,2FACgE,IAC9D,kBAAC,IAAD,CAAMC,GAAG,UAAT,Y,kICtBd,IAAMC,EAAYC,IAAOC,IAAV,KAUFC,EAAWC,gBAAK,gBAAGC,EAAH,EAAGA,MAAH,OAC3B,kBAACL,EAAD,CAAWM,wBAAyB,CAAEC,OAAQC,mBAASC,IAAOJ,U,sYCXhE,IAAMK,EAAiBT,IAAOC,IAAV,KAWdS,EAAUV,IAAOC,IAAV,KA6BPU,EAAgB,SAACP,GAA2B,IAAD,EACbA,EAAMQ,MAAM,KADC,mBACxCC,EADwC,KACjCC,EADiC,KACxBC,EADwB,KAG/C,OACwB,GAAtBC,SAASH,EAAO,IAAW,GACH,GAAxBG,SAASF,EAAS,IAClBE,SAASD,EAAS,KAeTE,EAAQd,gBAAK,YAA6C,IAA1Ce,EAAyC,EAAzCA,WAAYC,EAA6B,EAA7BA,WAA6B,EAClCC,oBAAS,GADyB,mBAC7DC,EAD6D,KAClDC,EADkD,KAG9DC,EAAsBC,uBAAY,WACtCF,GAAa,KACZ,CAACA,IALgE,EAXpD,SAAClB,GACjB,IAAKA,EACH,MAAO,CAAC,EAAGqB,KAFwC,MAKhCrB,EAAMQ,MAAM,OALoB,mBAK9Cc,EAL8C,KAKvCC,EALuC,KAOrD,MAAO,CAAChB,EAAce,GAAQf,EAAcgB,IAWvBC,CAAUT,GAPqC,mBAO7DO,EAP6D,KAOtDC,EAPsD,KAQ9DvD,EA/CU,SAACyD,GACjB,IAAIC,EAEJ,IACEA,EAAY,IAAIC,IAAIF,GACpB,SAGAC,EAAY,IAAIC,IAAIF,EAAIG,MAAM,oBAAqB,IARZ,IAWjCC,EAAWH,EAAXG,OAIR,OAFctE,IAAGuE,MAAMD,EAAOE,MAAM,IAA5BC,EAkCGC,CAAUnB,GAEfoB,EAASC,iBAAoB,MAC7BC,EAAaD,kBAAgB,GAE7BE,EAAiBjB,uBACrB,SAACkB,GAKI,IAAD,EAHAA,EAAEC,cAAgBhB,GAClBe,EAAEC,cAAgBhB,EAAM,IACvBa,EAAWI,WAEZ,UAACN,EAAOM,eAAR,aAAC,EAAgBC,qBAAkCC,aAEnDN,EAAWI,SAAU,KAGzB,CAACjB,EAAKa,IAGR,OACE,kBAAC/B,EAAD,KACGY,EACC,kBAAC,IAAD,CACE0B,IAAKT,EACLT,IAAG,0CAAqCzD,EAArC,kBAAiDsD,GACpDsB,UAAQ,EACRC,WAAYR,IAGd,kBAAC/B,EAAD,CAASwC,QAAS3B,GAAlB,kB,qqBC1FR,IAAMxB,EAAYC,IAAOC,IAAV,KAOTkD,EAAWnD,IAAOoD,EAAV,KAQRC,EAAkBrD,IAAOC,IAAV,KAKfqD,EAActD,IAAOoD,EAAV,KAOXG,EAAWvD,IAAOwD,KAAV,KAIDC,EAAetD,gBAAK,YAA0C,IAAD,EAAtCxB,EAAsC,EAAtCA,OAAQ+E,EAA8B,EAA9BA,KAA8B,EACtCtC,mBAAS,IAD6B,mBACjEuC,EADiE,KACtDC,EADsD,KAGxEC,qBAAU,WACK,IAATH,EACFE,EAAa,OACM,IAAVF,GACTE,EAAa,UAEd,CAACF,IAEJ,IAAMI,EAAetC,uBAAY,WNIb,IAACpD,KMHZO,EAAOP,GNIhBzB,EAAIK,IAAJ,0BAA2BoB,EAA3B,qBMJoBJ,MAAK,kBAAM4F,EAAa,WACzC,CAACjF,IAEEoF,EAAiBvC,uBAAY,WNEb,IAACpD,KMDZO,EAAOP,GNElBzB,EAAIK,IAAJ,0BAA2BoB,EAA3B,uBMFsBJ,MAAK,kBAAM4F,EAAa,aAC3C,CAACjF,IAEJ,OACE,kBAAC,EAAD,KACE,kBAAC0E,EAAD,KACE,kBAACF,EAAD,kBAAqBxE,EAAOqF,WAAWC,WACvC,kBAACd,EAAD,KACE,kBAAC,IAAD,CAAMrD,GAAE,0BAAqBnB,EAAOP,KAClC,yCAEF,kBAAC,IAAD,CAAM0B,GAAE,oCAA+BnB,EAAOP,KAA9C,eAGJ,kBAACkF,EAAD,KACG3E,EAAOuF,KACL/B,MAAM,GACNgC,KAAI,SAACjF,GAAD,OAAUA,EAAKG,SACnB+E,KAAK,QAEV,kBAACf,EAAD,KACG1E,EAAOqF,WAAWK,cACjB,kBAACd,EAAD,gBAAmB5E,EAAOqF,WAAWK,cAEtC1F,EAAOqF,WAAW7C,YACjB,kBAACoC,EAAD,0BAA6B5E,EAAOqF,WAAW7C,aAGnD,kBAACjB,EAAD,CAAUE,MAAOzB,EAAO2F,QACvB,UAAA3F,EAAOqF,WAAW9C,kBAAlB,eAA8BqD,SAAS,iBACtC,kBAACtD,EAAD,CACEC,WAAYvC,EAAOqF,WAAW9C,WAC9BC,WAAYxC,EAAOqF,WAAW7C,aAGlC,6BACA,kBAACkC,EAAD,KACE,6BACE,sCACW,IACR1E,EAAO6F,SACS,OAAdb,GAA+B,IAATD,EACnB,EACc,SAAdC,GAAiC,IAATD,GACvB,EACD,IAER,wCACa,IACV/E,EAAO8F,WACS,SAAdd,IAAkC,IAAVD,EACrB,EACc,OAAdC,IAAgC,IAAVD,GACrB,EACD,KAGV,6BACE,2BACE,4BAAQR,QAASY,EAAcY,SAAwB,OAAdf,GAAzC,WAIF,2BACE,4BAAQT,QAASa,EAAgBW,SAAwB,SAAdf,GAA3C,iB,ksBC3HL,IAAM5D,GAAYC,IAAOC,IAAV,MAKT0E,GAAa3E,IAAO4E,KAAV,MAMVC,GAAc7E,IAAO8E,MAAV,MAKXC,GAAe/E,IAAOgF,OAAV,MAKZC,GAAiBjF,IAAOkF,SAAV,KAKdC,GAAcnF,IAAOI,MAAV,KCbXgF,GAA0B,SAAC,GAEH,IAAD,EADlCC,EACkC,EADlCA,MAEQpD,EAAWqD,cAAXrD,OACA7D,EAAOT,IAAGuE,MAAMD,EAAOE,MAAM,IAA7B/D,GAF0B,EAIUgD,mBAC1C,MALgC,mBAI3BmE,EAJ2B,KAIXC,EAJW,OAOMpE,mBAAuB,WAP7B,mBAO3BzB,EAP2B,KAOb8F,EAPa,KAmBlC,OAVA5B,qBAAU,WACR1F,EAAoBC,GACjBJ,KAAKwH,GACLxH,MAAK,kBAAMyH,EAAgB,cAC3BC,OAAM,SAAChD,GACNiD,QAAQC,MAAMlD,GACd+C,EAAgB,cAEnB,CAACrH,IAGF,kBAAC,GAAD,KACE,kBAAC,EAAD,CAAQuB,aAAcA,EAAcE,eAAa,GAC/C,kBAAC4D,EAAD,CACE9E,OAAQ4G,EACR7B,KAAI,UACF2B,EAAMQ,MAAK,SAACnC,GAAD,OAAUA,EAAKoC,oBAAL,OAA0BP,QAA1B,IAA0BA,OAA1B,EAA0BA,EAAgBnH,cAD7D,aACF,EACIsF,UC5BHqC,GAAS5F,gBAAK,YAA+C,IAA5CrB,EAA2C,EAA3CA,MAAOkH,EAAoC,EAApCA,UAAWX,EAAyB,EAAzBA,MAAyB,EAC7BjE,mBAAgC,IADH,mBAChE6E,EADgE,KACjDC,EADiD,OAE/B9E,mBAAuB,WAFQ,mBAEhEzB,EAFgE,KAElD8F,EAFkD,KAcvE,OAVA5B,qBAAU,YToBsB,SAChCxE,EACA2G,GAFgC,OAIhCrJ,EACGC,IAA4B,kBAAmB,CAC9CuJ,OAAQ,CAAE9G,QAAO+G,MAAK,OAAEJ,QAAF,IAAEA,OAAF,EAAEA,EAAWK,iBAEpCrI,MAAK,SAACC,GAAD,OAAcA,EAASC,KAAKoI,uBS3BlCC,CAAmBzH,EAAOkH,GACvBhI,KAAKkI,GACLlI,MAAK,kBAAMyH,EAAgB,cAC3BC,OAAM,SAAChD,GACNiD,QAAQC,MAAMlD,GACd+C,EAAgB,cAEnB,CAAC3G,EAAOkH,IAGT,kBAAC,GAAD,KACE,kBAAC,EAAD,CAAQrG,aAAcA,GACnBsG,EAAcO,OAAS,EACtBP,EAAc9B,KAAI,SAACjF,GAAD,aAChB,kBAACuE,EAAD,CACEgD,IAAKvH,EAAKd,GACVO,OAAQO,EACRwE,KAAI,UACF2B,EAAMQ,MAAK,SAACnC,GAAD,OAAUA,EAAKoC,mBAAqB5G,EAAKd,aADlD,aACF,EAAyDsF,UAK/D,2BACE,yDC1CCgD,GAAe,SAACC,GAAD,OAA+C,SACzEjE,GAKAiE,EAAQjE,EAAEkE,cAAcC,S,+FCQ1B,IAAMC,GAAc9G,IAAO+G,OAAV,MAIJC,GAAQ,WACnB,IAAMC,EAAUC,cADS,EAEIvJ,IAAGuE,MAAM+E,EAAQzJ,SAASyE,OAAOE,MAAM,IAA5DrD,EAFiB,EAEjBA,MAAOkH,EAFU,EAEVA,UAFU,EAIG5E,mBAAuB,IAJ1B,mBAIlB+F,EAJkB,KAIVC,EAJU,OAKiBhG,mBAAQ,OAACtC,QAAD,IAACA,IAAS,IALnC,mBAKlBuI,EALkB,KAKHC,EALG,OAMelG,mBAAuB,WANtC,mBAMlBzB,EANkB,KAMJ8F,EANI,OAQyBrE,mBAAQ,OAAC4E,QAAD,IAACA,IAAa,IAR/C,mBAQlBuB,EARkB,KAQCC,EARD,OAUCpG,mBAAgB,IAVjB,mBAUlBiE,EAVkB,KAUXoC,EAVW,KAYzB5D,qBAAU,WACR9F,IACGC,KAAKU,GACLV,KAAKoJ,GACLpJ,KAAKS,GACLT,KAAKyJ,GACLzJ,MAAK,kBAAMyH,EAAgB,cAC3BC,OAAM,SAAChD,GACNiD,QAAQC,MAAMlD,GACd+C,EAAgB,cAEnB,IAEH,IAAMiC,EAAelG,uBACnB,SAACkB,GACCA,EAAEiF,iBAEF,IAAMC,EAAW,CACf9I,MAAOuI,EACPrB,UAAWuB,GAGbM,OAAOC,QAAQF,GAAU/I,SAAQ,YAAmB,IAAD,mBAAhB4H,EAAgB,kBAExCmB,EAASnB,MAIpBQ,EAAQzH,KAAR,wBAA8B7B,IAAGC,UAAUgK,OAE7C,CAACX,EAASM,EAAmBF,IAGzBU,EAAYvG,uBAAY,WAC5BgG,EAAqB,IACrBF,EAAiB,MAChB,IAEH,OACE,oCACE,+CACA,kBAAC,EAAD,CAAQ3H,aAAcA,EAAcE,eAAa,GAC/C,kBAAC8E,GAAD,CAAYqD,SAAUN,GACpB,kBAAC7C,GAAD,qBAEE,kBAACE,GAAD,CACE8B,MAAOQ,EACPY,SAAUvB,GAAaY,IAEvB,4BAAQT,MAAM,GAAGnC,UAAQ,GAAzB,SAGCyC,EAAOhD,KAAI,SAACrF,GAAD,OACV,4BAAQ2H,IAAK3H,EAAMV,GAAIyI,MAAO/H,EAAMO,OAApC,UACM,KAAK6I,OAAOpJ,EAAMS,OADxB,YACkCT,EAAMO,aAK9C,kBAACwF,GAAD,+BAEE,kBAACE,GAAD,CACE8B,MAAOU,EACPU,SAAUvB,GAAac,IAEvB,4BAAQX,MAAM,GAAGnC,UAAQ,GAAzB,aAGCjF,EAAY0E,KAAI,SAAC6B,GAAD,OACf,4BAAQS,IAAKT,EAAWa,MAAOb,GAC5BA,QAKT,6BACE,4BAAQtB,UAAW2C,GAAnB,UACA,kBAAC,IAAD,CAAOnD,KAAK,iBACV,kBAAC4C,GAAD,CAAa5D,QAAS6E,GAAtB,aAKR,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO7D,KAAK,iBACTpF,EACC,kBAACiH,GAAD,CAAQjH,MAAOA,EAAOkH,UAAWA,EAAWX,MAAOA,IAEnD,kBAAC,IAAD,CAAUvF,GAAG,YAGjB,kBAAC,IAAD,CAAOoE,KAAK,0BACV,kBAAC,GAAD,CAAyBmB,MAAOA,KAElC,kBAAC,IAAD,CAAOnB,KAAK,KACV,kBAAC,IAAD,CAAUpE,GAAG,eC7HVqI,GAAgB,WAAO,IAAD,EACjC,iBAAOC,aAAaC,QAAQ,gBAA5B,QAAwC,IAQpCC,GAAaH,KACfG,IACFpL,EAAQoL,ICPH,IAAMC,GAAY,WAAO,IAAD,EACHnH,mBAAS+G,MADN,mBACtBhL,EADsB,KACfqL,EADe,KAEvBvB,EAAUC,cAEVuB,EAAajH,uBAAY,YDJR,SAACrE,GACxBiL,aAAaM,QAAQ,QAASvL,GAC9BD,EAAQC,GCGNwL,CAAUxL,GACV8J,EAAQ2B,QAAQ,YACf,CAACzL,EAAO8J,IAIX,OACE,oCACE,4BACE,oCACQ,IACN,uBACE4B,KAAK,mCACLC,OAAO,SACPC,IAAI,uBAHN,aAMK,IARP,sCAWA,4BACE,uBACEF,KAAK,mDACLC,OAAO,SACPC,IAAI,uBAHN,eAQF,sDAEF,kBAAC9D,GAAD,CAAgB4B,MAAO1J,EAAO8K,SAAUvB,GAAa8B,KACrD,4BAAQQ,KAAK,SAAS9F,QAASuF,GAA/B,U,oBCnBOQ,GAAa,WACxB,IAAMhC,EAAUC,cACRjF,EAAWqD,cAAXrD,OACA7D,EAAOT,IAAGuE,MAAMD,EAAOE,MAAM,IAA7B/D,GAHsB,EAKFgD,mBAAuB,IALrB,mBAKvB+F,EALuB,KAKfC,EALe,OAMYhG,mBAAS,IANrB,mBAMvBiG,EANuB,KAMRC,EANQ,OAOJlG,mBAAS,IAPL,mBAOvB/B,EAPuB,KAOhB6J,EAPgB,OAQN9H,mBAAS,IARH,mBAQvBkD,EARuB,KAQjB6E,EARiB,OASE/H,mBAAS,IATX,mBASvBgI,EATuB,KASbC,EATa,OAUUjI,mBAAuB,WAVjC,mBAUvBzB,EAVuB,KAUT8F,EAVS,OAYoBrE,mBAAS,IAZ7B,mBAYvBmG,EAZuB,KAYJC,EAZI,KAc9B3D,qBAAU,WACR9F,IACGC,KAAKU,GACLV,MAAK,SAACmJ,GAEL,OADAC,EAAUD,GACHA,KAERnJ,MAAK,SAACmJ,GACL,GAAI/I,EACF,OAAOD,EAAoBC,GAAIJ,MAAK,SAACuH,GACnC+B,EACEH,EAAOtB,MACL,SAAC/G,GAAD,OACEA,EAAMV,KACNmH,EAAerB,KAAKqB,EAAerB,KAAKsC,OAAS,GAAGpI,MACrDiB,OAEL6J,EAAS,uBACTC,EAAQ5D,EAAejB,MACvB+E,EAAY9D,EAAevB,WAAWC,UAAUqF,eAChD9B,EAAqBjC,EAAevB,WAAWoC,MAAMkD,qBAI1DtL,MAAK,kBAAMyH,EAAgB,cAC3BC,OAAM,SAAChD,GACNiD,QAAQC,MAAMlD,GACd+C,EAAgB,cAEnB,CAACrH,IAEJ,IAAMsJ,EAAelG,uBACnB,SAACkB,GAGC,GAFAA,EAAEiF,iBAGCN,GACAhI,GACAiF,GACA8E,GACA7B,EALH,CAUA,IAAMgC,EAAUnL,EAAKI,EAAuBF,EAEtCkL,EAAU,CACdpL,KACAW,SAAUoI,EACPtB,MAAK,SAAC/G,GAAD,OAAWA,EAAMO,QAAUgI,KAChCjJ,GAAGqL,WACNpK,QACAiF,OACA8E,WACApD,UAAWuB,EAAkBlB,cAC7BhC,aAAcqF,KAA4BvB,MAAiBwB,MAGxDvL,UACIoL,EAAQpL,GAGjBmL,EAAQC,GACLxL,MAAK,SAACuH,GACL0B,EAAQzH,KAAR,2CAA0CpB,QAA1C,IAA0CA,IAAMmH,EAAenH,QAEhEsH,OAAM,SAAChD,GAAD,OAAOiD,QAAQC,MAAMlD,SAEhC,CACE0G,EACAnC,EACA7I,EACAmJ,EACAF,EACA/C,EACAjF,EACA8H,IAIJ,OACE,kBAAC,EAAD,CAAQxH,aAAcA,EAAcE,eAAa,GAC/C,kBAAC8E,GAAD,CAAYqD,SAAUN,GACpB,kBAAC7C,GAAD,qBAEE,kBAACE,GAAD,CACE8B,MAAOQ,EACPY,SAAUvB,GAAaY,IAEvB,4BAAQT,MAAM,GAAGnC,UAAQ,GAAzB,SAGCyC,EAAOhD,KAAI,SAACrF,GAAD,OACV,4BAAQ2H,IAAK3H,EAAMV,GAAIyI,MAAO/H,EAAMO,OAApC,UACM,KAAK6I,OAAOpJ,EAAMS,OADxB,YACkCT,EAAMO,aAK9C,kBAACwF,GAAD,+BAEE,kBAACE,GAAD,CACE8B,MAAOU,EACPU,SAAUvB,GAAac,IAEvB,4BAAQX,MAAM,GAAGnC,UAAQ,GAAzB,aAGCjF,EAAY0E,KAAI,SAAC6B,GAAD,OACf,4BAAQS,IAAKT,EAAWa,MAAOb,GAC5BA,QAKT,kBAACnB,GAAD,cAEE,kBAACM,GAAD,CAAa0B,MAAOxH,EAAO4I,SAAUvB,GAAawC,MAEpD,kBAACrE,GAAD,wBAEE,kBAACI,GAAD,CAAgB4B,MAAOvC,EAAM2D,SAAUvB,GAAayC,MAEtD,kBAACtE,GAAD,iBAEE,kBAACM,GAAD,CAAa0B,MAAOuC,EAAUnB,SAAUvB,GAAa2C,MAEvD,4BAAQL,KAAK,UAAb,QACA,2D,oICzJR,IAAMY,GAAcC,YAAH,MCVjBC,IAASC,OAAO,mBDgBG,kBACjB,kBAAC,IAAD,KACE,kBAACH,GAAD,MACA,6BACE,2BACE,kBAAC,IAAD,CAAM9J,GAAG,UAAT,eAEF,2BACE,kBAAC,IAAD,CAAMA,GAAG,gBAAT,iBAGJ,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOoE,KAAK,SAAS8F,UAAWzB,KAChC,kBAAC,IAAD,CAAOrE,KAAK,SAAS8F,UAAWhD,KAChC,kBAAC,IAAD,CAAO9C,KAAK,eAAe8F,UAAWf,KACtC,kBAAC,IAAD,CAAO/E,KAAK,KACV,kBAAC,IAAD,CAAUpE,GAAG,gBChCL,MAASmK,SAASC,eAAe,U","file":"static/js/main.22a19de6.chunk.js","sourcesContent":["import axios, { AxiosInstance } from \"axios\";\nimport qs from \"qs\";\n\nimport {\n  KnowledgeBlock,\n  KnowledgeBlockResponse,\n  KnowledgeBlockPost,\n  KnowledgeBlockPut,\n  Votes,\n} from \"./model/knowledgeBlocks\";\nimport { TopicsResponse } from \"./model/topics\";\n\ntype UninitializedApi = {\n  get: () => Promise<never>;\n  post: () => Promise<never>;\n  put: () => Promise<never>;\n  delete: () => Promise<never>;\n};\n\nlet api: AxiosInstance | UninitializedApi = {\n  get: () => Promise.reject(),\n  post: () => Promise.reject(),\n  put: () => Promise.reject(),\n  delete: () => Promise.reject(),\n};\n\nexport const makeApi = (token: string) => {\n  api = axios.create({\n    baseURL: `http://${window.location.host}/api`,\n    paramsSerializer: qs.stringify,\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  });\n};\n\nexport const fetchTopics = () =>\n  api.get<TopicsResponse>(\"topics\").then((response) => response.data);\n\nexport const fetchSearchResults = (\n  title: string,\n  seniority: string | undefined\n) =>\n  api\n    .get<KnowledgeBlockResponse>(\"knowledgeblocks\", {\n      params: { title, level: seniority?.toUpperCase() },\n    })\n    .then((response) => response.data.knowledgeBlockList);\n\nexport const fetchKnowledgeBlock = (id: string) =>\n  api\n    .get<KnowledgeBlock>(`knowledgeblocks/${encodeURI(id)}`)\n    .then((response) => response.data);\n\nexport const saveKnowledgeBlock = (block: KnowledgeBlockPost) =>\n  api.post<KnowledgeBlockPost, KnowledgeBlock>(\"knowledgeblocks\", block);\n\nexport const updateKnowledgeBlock = (block: KnowledgeBlockPut) =>\n  api.put<KnowledgeBlockPut, KnowledgeBlock>(\"knowledgeblocks\", block);\n\nexport const upvote = (id: number) =>\n  api.put(`knowledgeblocks/${id}/actions/upvote`);\nexport const downvote = (id: number) =>\n  api.put(`knowledgeblocks/${id}/actions/downvote`);\n\nexport const getVotes = () =>\n  api.get<Votes>(\"/user/votes\").then((response) => response.data);\n","import { TopicsResponse, ApiTopic } from \"../model/topics\";\n\nexport type Topic = ApiTopic & {\n  depth: number;\n};\n\nexport const transformTopics = (response: TopicsResponse): Array<Topic> => {\n  const result: Array<Topic> = [];\n\n  response.topicList.forEach((topic) => {\n    if (!topic.parentId) {\n      result.push({\n        ...topic,\n        title: topic.title.trim(),\n        depth: 0,\n      });\n\n      return;\n    }\n\n    const parentIndex = result.findIndex((item) => item.id === topic.parentId);\n\n    if (parentIndex !== undefined) {\n      result.splice(parentIndex + 1, 0, {\n        ...topic,\n        title: topic.title.trim(),\n        depth: result[parentIndex].depth + 1,\n      });\n    }\n  });\n\n  return result;\n};\n","export const seniorities = [\"entry\", \"medium\", \"advanced\"];\n","import React, { ReactNode } from \"react\";\nimport { LoadingState } from \"./types\";\nimport { Link } from \"react-router-dom\";\n\ntype LoaderProps = {\n  loadingState: LoadingState;\n  children: ReactNode;\n  withTokenLink?: boolean;\n};\n\nexport const Loader = ({\n  loadingState,\n  children,\n  withTokenLink,\n}: LoaderProps) => {\n  return (\n    <>\n      {loadingState === \"success\" ? (\n        children\n      ) : (\n        <p>\n          <em>\n            {loadingState === \"loading\" ? \"Loading...\" : \"An error ocurred :(\"}\n          </em>\n          {loadingState === \"error\" && withTokenLink && (\n            <p>\n              If you think this might be due to a token error, please click{\" \"}\n              <Link to=\"/token\">here</Link>\n            </p>\n          )}\n        </p>\n      )}\n    </>\n  );\n};\n","import React, { memo } from \"react\";\nimport styled from \"styled-components\";\nimport marked from \"marked\";\nimport { sanitize } from \"dompurify\";\n\nconst Container = styled.div`\n  * {\n    max-width: 100%;\n  }\n`;\n\ntype MarkdownProps = {\n  input: string;\n};\n\nexport const Markdown = memo(({ input }: MarkdownProps) => (\n  <Container dangerouslySetInnerHTML={{ __html: sanitize(marked(input)) }} />\n));\n","import React, { useCallback, useRef, memo, useState } from \"react\";\nimport styled from \"styled-components\";\nimport ReactPlayer, { ReactPlayerProps } from \"react-player\";\nimport qs from \"qs\";\n\nconst VideoContainer = styled.div`\n  margin-top: 20px;\n  display: flex;\n  justify-content: center;\n`;\n\ntype VideoProps = {\n  sourceLink: string;\n  timePeriod: string;\n};\n\nconst Overlay = styled.div`\n  width: 640px;\n  height: 360px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  background: black;\n  color: white;\n`;\n\nconst extractId = (url: string): string => {\n  let parsedUrl: URL;\n\n  try {\n    parsedUrl = new URL(url);\n  } catch {\n    // NOTE: @Stanko urls aren't parsed correctly\n    // [url](url) <- they arrive like that so I extract them here\n    parsedUrl = new URL(url.match(/[^[](\\S+)(?=])/gi)![0]);\n  }\n\n  const { search } = parsedUrl;\n\n  const { v } = qs.parse(search.slice(1));\n\n  return v as string;\n};\n\nconst timeToSeconds = (input: string): number => {\n  const [hours, minutes, seconds] = input.split(\":\");\n\n  return (\n    parseInt(hours, 10) * 60 * 60 +\n    parseInt(minutes, 10) * 60 +\n    parseInt(seconds, 10)\n  );\n};\n\nconst parseTime = (input: string): [number, number] => {\n  if (!input) {\n    return [0, Infinity];\n  }\n\n  const [start, end] = input.split(\" - \");\n\n  return [timeToSeconds(start), timeToSeconds(end)];\n};\n\n// TODO: optimize resource loading\nexport const Video = memo(({ sourceLink, timePeriod }: VideoProps) => {\n  const [showVideo, setShowVideo] = useState(false);\n\n  const overlayClickHandler = useCallback(() => {\n    setShowVideo(true);\n  }, [setShowVideo]);\n\n  const [start, end] = parseTime(timePeriod);\n  const id = extractId(sourceLink);\n\n  const player = useRef<ReactPlayer>(null);\n  const pausedOnce = useRef<boolean>(false);\n\n  const handleProgress = useCallback(\n    (e: Parameters<NonNullable<ReactPlayerProps[\"onProgress\"]>>[0]) => {\n      if (\n        e.playedSeconds > end &&\n        e.playedSeconds - end < 2 &&\n        !pausedOnce.current\n      ) {\n        (player.current?.getInternalPlayer() as YT.Player).pauseVideo();\n\n        pausedOnce.current = true;\n      }\n    },\n    [end, pausedOnce]\n  );\n\n  return (\n    <VideoContainer>\n      {showVideo ? (\n        <ReactPlayer\n          ref={player}\n          url={`https://www.youtube.com/watch?v=${id}&start=${start}`}\n          controls\n          onProgress={handleProgress}\n        />\n      ) : (\n        <Overlay onClick={overlayClickHandler}>Show video</Overlay>\n      )}\n    </VideoContainer>\n  );\n});\n","import React, { memo, useCallback, useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nimport { KnowledgeBlock } from \"../../api/model/knowledgeBlocks\";\nimport { Markdown } from \"./Markdown\";\nimport { Video } from \"./Video\";\nimport { upvote, downvote } from \"../../api\";\n\ntype SearchResultProps = {\n  result: KnowledgeBlock;\n  vote?: number;\n};\n\nconst Container = styled.div`\n  border: 1px solid black;\n  padding: 10px;\n  border-radius: 8px;\n  margin-bottom: 15px;\n`;\n\nconst Subtitle = styled.p`\n  margin: 0;\n\n  > a + a {\n    margin-left: 5px;\n  }\n`;\n\nconst SpreadContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst Breadcrumbs = styled.p`\n  opacity: 0.75;\n  font-size: 0.8em;\n  padding-bottom: 5px;\n  border-bottom: 1px solid black;\n`;\n\nconst Metadata = styled.span`\n  font-size: 0.7em;\n`;\n\nexport const SearchResult = memo(({ result, vote }: SearchResultProps) => {\n  const [localVote, setLocalVote] = useState(\"\");\n\n  useEffect(() => {\n    if (vote === 1) {\n      setLocalVote(\"up\");\n    } else if (vote === -1) {\n      setLocalVote(\"down\");\n    }\n  }, [vote]);\n\n  const handleUpvote = useCallback(() => {\n    upvote(result.id).then(() => setLocalVote(\"up\"));\n  }, [result]);\n\n  const handleDownvote = useCallback(() => {\n    downvote(result.id).then(() => setLocalVote(\"down\"));\n  }, [result]);\n\n  return (\n    <Container>\n      <SpreadContainer>\n        <Subtitle>Category: {result.attributes.semantics}</Subtitle>\n        <Subtitle>\n          <Link to={`/note-editor?id=${result.id}`}>\n            <button>Edit</button>\n          </Link>\n          <Link to={`/notes/knowledge-block?id=${result.id}`}>Permalink</Link>\n        </Subtitle>\n      </SpreadContainer>\n      <Breadcrumbs>\n        {result.path\n          .slice(1)\n          .map((item) => item.title)\n          .join(\" - \")}\n      </Breadcrumbs>\n      <SpreadContainer>\n        {result.attributes.sourceAuthor && (\n          <Metadata>Author: {result.attributes.sourceAuthor}</Metadata>\n        )}\n        {result.attributes.timePeriod && (\n          <Metadata>Relevant section: {result.attributes.timePeriod}</Metadata>\n        )}\n      </SpreadContainer>\n      <Markdown input={result.text} />\n      {result.attributes.sourceLink?.includes(\"youtube.com\") && (\n        <Video\n          sourceLink={result.attributes.sourceLink}\n          timePeriod={result.attributes.timePeriod!}\n        />\n      )}\n      <hr />\n      <SpreadContainer>\n        <div>\n          <p>\n            Upvotes:{\" \"}\n            {result.upVotes +\n              (localVote === \"up\" && vote !== 1\n                ? 1\n                : localVote === \"down\" && vote === 1\n                ? -1\n                : 0)}\n          </p>\n          <p>\n            Downvotes:{\" \"}\n            {result.downVotes +\n              (localVote === \"down\" && vote !== -1\n                ? 1\n                : localVote === \"up\" && vote === -1\n                ? -1\n                : 0)}\n          </p>\n        </div>\n        <div>\n          <p>\n            <button onClick={handleUpvote} disabled={localVote === \"up\"}>\n              ↑\n            </button>\n          </p>\n          <p>\n            <button onClick={handleDownvote} disabled={localVote === \"down\"}>\n              ↓\n            </button>\n          </p>\n        </div>\n      </SpreadContainer>\n    </Container>\n  );\n});\n","import styled from \"styled-components\";\n\nexport const Container = styled.div`\n  margin: 0 auto;\n  width: 800px;\n`;\n\nexport const StyledForm = styled.form`\n  border-bottom: 1px solid black;\n  padding-bottom: 15px;\n  margin-bottom: 15px;\n`;\n\nexport const StyledLabel = styled.label`\n  display: block;\n  margin-bottom: 5px;\n`;\n\nexport const StyledSelect = styled.select`\n  margin-left: 8px;\n  max-width: 60%;\n`;\n\nexport const StyledTextArea = styled.textarea`\n  width: 100%;\n  height: 300px;\n`;\n\nexport const StyledInput = styled.input`\n  margin-left: 8px;\n  width: 60%;\n`;\n","import React, { useEffect, useState } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport qs from \"qs\";\nimport { fetchKnowledgeBlock } from \"../../api\";\n\nimport { KnowledgeBlock, Votes } from \"../../api/model/knowledgeBlocks\";\nimport { Loader } from \"../common/Loader\";\nimport { LoadingState } from \"../common/types\";\nimport { SearchResult } from \"../search/SearchResult\";\nimport { Container } from \"../common/layout\";\n\ntype KnowledgeBlockComponentProps = {\n  votes: Votes;\n};\n\nexport const KnowledgeBlockComponent = ({\n  votes,\n}: KnowledgeBlockComponentProps) => {\n  const { search } = useLocation();\n  const { id } = qs.parse(search.slice(1));\n\n  const [knowledgeBlock, setKnowledgeBlock] = useState<KnowledgeBlock | null>(\n    null\n  );\n  const [loadingState, setLoadingState] = useState<LoadingState>(\"loading\");\n\n  useEffect(() => {\n    fetchKnowledgeBlock(id)\n      .then(setKnowledgeBlock)\n      .then(() => setLoadingState(\"success\"))\n      .catch((e) => {\n        console.error(e);\n        setLoadingState(\"error\");\n      });\n  }, [id]);\n\n  return (\n    <Container>\n      <Loader loadingState={loadingState} withTokenLink>\n        <SearchResult\n          result={knowledgeBlock!}\n          vote={\n            votes.find((vote) => vote.knowledgeBlockId === knowledgeBlock?.id)\n              ?.vote\n          }\n        />\n      </Loader>\n    </Container>\n  );\n};\n","import React, { memo, useEffect, useState } from \"react\";\n\nimport { fetchSearchResults } from \"../../api\";\nimport { KnowledgeBlock, Votes } from \"../../api/model/knowledgeBlocks\";\nimport { Container } from \"../common/layout\";\nimport { Loader } from \"../common/Loader\";\nimport { LoadingState } from \"../common/types\";\nimport { SearchResult } from \"./SearchResult\";\n\ntype SearchProps = {\n  topic: string;\n  seniority: string | undefined;\n  votes: Votes;\n};\n\nexport const Search = memo(({ topic, seniority, votes }: SearchProps) => {\n  const [searchResults, setSearchResults] = useState<Array<KnowledgeBlock>>([]);\n  const [loadingState, setLoadingState] = useState<LoadingState>(\"loading\");\n\n  useEffect(() => {\n    fetchSearchResults(topic, seniority)\n      .then(setSearchResults)\n      .then(() => setLoadingState(\"success\"))\n      .catch((e) => {\n        console.error(e);\n        setLoadingState(\"error\");\n      });\n  }, [topic, seniority]);\n\n  return (\n    <Container>\n      <Loader loadingState={loadingState}>\n        {searchResults.length > 0 ? (\n          searchResults.map((item) => (\n            <SearchResult\n              key={item.id}\n              result={item}\n              vote={\n                votes.find((vote) => vote.knowledgeBlockId === item.id)?.vote\n              }\n            />\n          ))\n        ) : (\n          <p>\n            <em>No results found :(</em>\n          </p>\n        )}\n      </Loader>\n    </Container>\n  );\n});\n","import { Dispatch, SetStateAction, FormEvent } from \"react\";\n\nexport const handleChange = (updater: Dispatch<SetStateAction<string>>) => (\n  e:\n    | FormEvent<HTMLSelectElement>\n    | FormEvent<HTMLTextAreaElement>\n    | FormEvent<HTMLInputElement>\n) => {\n  updater(e.currentTarget.value);\n};\n","import React, { useEffect, useState, useCallback, FormEvent } from \"react\";\nimport styled from \"styled-components\";\nimport { Redirect, Route, Switch, useHistory } from \"react-router-dom\";\nimport qs from \"qs\";\n\nimport { fetchTopics, getVotes } from \"../../api\";\nimport { transformTopics, Topic } from \"../../api/transformers\";\nimport { seniorities } from \"../../api/seniorities\";\nimport { KnowledgeBlockComponent } from \"../knowledge-block\";\nimport { Search } from \"../search\";\nimport { LoadingState } from \"../common/types\";\nimport { Loader } from \"../common/Loader\";\nimport { StyledForm, StyledLabel, StyledSelect } from \"../common/layout\";\nimport { handleChange } from \"../common/util\";\nimport { Votes } from \"../../api/model/knowledgeBlocks\";\n\nconst ClearButton = styled.button`\n  margin-left: 10px;\n`;\n\nexport const Notes = () => {\n  const history = useHistory();\n  const { topic, seniority } = qs.parse(history.location.search.slice(1));\n\n  const [topics, setTopics] = useState<Array<Topic>>([]);\n  const [selectedTopic, setSelectedTopic] = useState(topic ?? \"\");\n  const [loadingState, setLoadingState] = useState<LoadingState>(\"loading\");\n\n  const [selectedSeniority, setSelectedSeniority] = useState(seniority ?? \"\");\n\n  const [votes, setVotes] = useState<Votes>([]);\n\n  useEffect(() => {\n    fetchTopics()\n      .then(transformTopics)\n      .then(setTopics)\n      .then(getVotes)\n      .then(setVotes)\n      .then(() => setLoadingState(\"success\"))\n      .catch((e) => {\n        console.error(e);\n        setLoadingState(\"error\");\n      });\n  }, []);\n\n  const handleSubmit = useCallback(\n    (e: FormEvent<HTMLFormElement>) => {\n      e.preventDefault();\n\n      const queryObj = {\n        topic: selectedTopic,\n        seniority: selectedSeniority,\n      };\n\n      Object.entries(queryObj).forEach(([key, value]) => {\n        if (!value) {\n          delete queryObj[key as keyof typeof queryObj];\n        }\n      });\n\n      history.push(`/notes/search?${qs.stringify(queryObj)}`);\n    },\n    [history, selectedSeniority, selectedTopic]\n  );\n\n  const clearForm = useCallback(() => {\n    setSelectedSeniority(\"\");\n    setSelectedTopic(\"\");\n  }, []);\n\n  return (\n    <>\n      <h1>Architect Notes</h1>\n      <Loader loadingState={loadingState} withTokenLink>\n        <StyledForm onSubmit={handleSubmit}>\n          <StyledLabel>\n            Select topic:\n            <StyledSelect\n              value={selectedTopic}\n              onChange={handleChange(setSelectedTopic)}\n            >\n              <option value=\"\" disabled>\n                Topic\n              </option>\n              {topics.map((topic) => (\n                <option key={topic.id} value={topic.title}>\n                  {`${\"--\".repeat(topic.depth)} ${topic.title}`}\n                </option>\n              ))}\n            </StyledSelect>\n          </StyledLabel>\n          <StyledLabel>\n            Select seniority level:\n            <StyledSelect\n              value={selectedSeniority}\n              onChange={handleChange(setSelectedSeniority)}\n            >\n              <option value=\"\" disabled>\n                Seniority\n              </option>\n              {seniorities.map((seniority) => (\n                <option key={seniority} value={seniority}>\n                  {seniority}\n                </option>\n              ))}\n            </StyledSelect>\n          </StyledLabel>\n          <div>\n            <button disabled={!selectedTopic}>Search</button>\n            <Route path=\"/notes/search\">\n              <ClearButton onClick={clearForm}>Clear</ClearButton>\n            </Route>\n          </div>\n        </StyledForm>\n      </Loader>\n      <Switch>\n        <Route path=\"/notes/search\">\n          {topic ? (\n            <Search topic={topic} seniority={seniority} votes={votes} />\n          ) : (\n            <Redirect to=\"/notes\" />\n          )}\n        </Route>\n        <Route path=\"/notes/knowledge-block\">\n          <KnowledgeBlockComponent votes={votes} />\n        </Route>\n        <Route path=\"*\">\n          <Redirect to=\"/notes\" />\n        </Route>\n      </Switch>\n    </>\n  );\n};\n","import { makeApi } from \".\";\n\nexport const getSavedToken = () => {\n  return localStorage.getItem(\"token\") ?? \"\";\n};\n\nexport const saveToken = (token: string) => {\n  localStorage.setItem(\"token\", token);\n  makeApi(token);\n};\n\nconst savedToken = getSavedToken();\nif (savedToken) {\n  makeApi(savedToken);\n}\n","import React, { useState, useCallback } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { saveToken, getSavedToken } from \"../../api/token\";\nimport { handleChange } from \"../common/util\";\nimport { StyledTextArea } from \"../common/layout\";\n\nexport const TokenPage = () => {\n  const [token, setToken] = useState(getSavedToken());\n  const history = useHistory();\n\n  const handleSave = useCallback(() => {\n    saveToken(token);\n    history.replace(\"/notes\");\n  }, [token, history]);\n\n  // TODO: automatic token check - maybe a /me endpoint\n\n  return (\n    <>\n      <ol>\n        <li>\n          Visit{\" \"}\n          <a\n            href=\"http://3.125.104.84.xip.io:5050/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            this link\n          </a>{\" \"}\n          and login with your Google account\n        </li>\n        <li>\n          <a\n            href=\"http://3.125.104.84.xip.io:5050/api/authenticate\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Click here\n          </a>\n        </li>\n        <li>Paste the token below</li>\n      </ol>\n      <StyledTextArea value={token} onChange={handleChange(setToken)} />\n      <button type=\"button\" onClick={handleSave}>\n        Save\n      </button>\n    </>\n  );\n};\n","import React, { useEffect, useState, useCallback, FormEvent } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport qs from \"qs\";\nimport jwtDecode from \"jwt-decode\";\nimport {\n  fetchTopics,\n  saveKnowledgeBlock,\n  fetchKnowledgeBlock,\n  updateKnowledgeBlock,\n} from \"../../api\";\nimport { transformTopics, Topic } from \"../../api/transformers\";\nimport { LoadingState } from \"../common/types\";\nimport {\n  StyledForm,\n  StyledLabel,\n  StyledSelect,\n  StyledInput,\n  StyledTextArea,\n} from \"../common/layout\";\nimport { seniorities } from \"../../api/seniorities\";\nimport { handleChange } from \"../common/util\";\nimport { Loader } from \"../common/Loader\";\nimport { getSavedToken } from \"../../api/token\";\n\nexport const CreateNote = () => {\n  const history = useHistory();\n  const { search } = useLocation();\n  const { id } = qs.parse(search.slice(1));\n\n  const [topics, setTopics] = useState<Array<Topic>>([]);\n  const [selectedTopic, setSelectedTopic] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [text, setText] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [loadingState, setLoadingState] = useState<LoadingState>(\"loading\");\n\n  const [selectedSeniority, setSelectedSeniority] = useState(\"\");\n\n  useEffect(() => {\n    fetchTopics()\n      .then(transformTopics)\n      .then((topics) => {\n        setTopics(topics);\n        return topics;\n      })\n      .then((topics) => {\n        if (id) {\n          return fetchKnowledgeBlock(id).then((knowledgeBlock) => {\n            setSelectedTopic(\n              topics.find(\n                (topic) =>\n                  topic.id ===\n                  knowledgeBlock.path[knowledgeBlock.path.length - 1].id\n              )!.title\n            );\n            setTitle(\"@@ MISSING TITLE @@\");\n            setText(knowledgeBlock.text);\n            setCategory(knowledgeBlock.attributes.semantics.toLowerCase());\n            setSelectedSeniority(knowledgeBlock.attributes.level.toLowerCase());\n          });\n        }\n      })\n      .then(() => setLoadingState(\"success\"))\n      .catch((e) => {\n        console.error(e);\n        setLoadingState(\"error\");\n      });\n  }, [id]);\n\n  const handleSubmit = useCallback(\n    (e: FormEvent<HTMLFormElement>) => {\n      e.preventDefault();\n\n      if (\n        !selectedTopic ||\n        !title ||\n        !text ||\n        !category ||\n        !selectedSeniority\n      ) {\n        return;\n      }\n\n      const request = id ? updateKnowledgeBlock : saveKnowledgeBlock;\n\n      const payload = {\n        id,\n        parentId: topics\n          .find((topic) => topic.title === selectedTopic)!\n          .id.toString(),\n        title,\n        text,\n        category,\n        seniority: selectedSeniority.toUpperCase(),\n        sourceAuthor: jwtDecode<{ name: string }>(getSavedToken()).name,\n      };\n\n      if (!id) {\n        delete payload.id;\n      }\n\n      request(payload)\n        .then((knowledgeBlock) => {\n          history.push(`/notes/knowledge-block?id=${id ?? knowledgeBlock.id}`);\n        })\n        .catch((e) => console.error(e));\n    },\n    [\n      category,\n      history,\n      id,\n      selectedSeniority,\n      selectedTopic,\n      text,\n      title,\n      topics,\n    ]\n  );\n\n  return (\n    <Loader loadingState={loadingState} withTokenLink>\n      <StyledForm onSubmit={handleSubmit}>\n        <StyledLabel>\n          Select topic:\n          <StyledSelect\n            value={selectedTopic}\n            onChange={handleChange(setSelectedTopic)}\n          >\n            <option value=\"\" disabled>\n              Topic\n            </option>\n            {topics.map((topic) => (\n              <option key={topic.id} value={topic.title}>\n                {`${\"--\".repeat(topic.depth)} ${topic.title}`}\n              </option>\n            ))}\n          </StyledSelect>\n        </StyledLabel>\n        <StyledLabel>\n          Select seniority level:\n          <StyledSelect\n            value={selectedSeniority}\n            onChange={handleChange(setSelectedSeniority)}\n          >\n            <option value=\"\" disabled>\n              Seniority\n            </option>\n            {seniorities.map((seniority) => (\n              <option key={seniority} value={seniority}>\n                {seniority}\n              </option>\n            ))}\n          </StyledSelect>\n        </StyledLabel>\n        <StyledLabel>\n          Title:\n          <StyledInput value={title} onChange={handleChange(setTitle)} />\n        </StyledLabel>\n        <StyledLabel>\n          Text (markdown):\n          <StyledTextArea value={text} onChange={handleChange(setText)} />\n        </StyledLabel>\n        <StyledLabel>\n          Category:\n          <StyledInput value={category} onChange={handleChange(setCategory)} />\n        </StyledLabel>\n        <button type=\"submit\">Save</button>\n        <p>All fields are mandatory.</p>\n      </StyledForm>\n    </Loader>\n  );\n};\n","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n  Link,\n} from \"react-router-dom\";\nimport { createGlobalStyle } from \"styled-components\";\n\nimport { Notes } from \"./pages/notes\";\nimport { TokenPage } from \"./pages/token\";\nimport { CreateNote } from \"./pages/note-editor\";\n\nconst GlobalStyle = createGlobalStyle`\n  body {\n    font-family: Montserrat, 'sans-serif';\n  }\n`;\n\nexport const App = () => (\n  <Router>\n    <GlobalStyle />\n    <div>\n      <p>\n        <Link to=\"/notes\">View notes</Link>\n      </p>\n      <p>\n        <Link to=\"/note-editor\">Create note</Link>\n      </p>\n    </div>\n    <Switch>\n      <Route path=\"/token\" component={TokenPage} />\n      <Route path=\"/notes\" component={Notes} />\n      <Route path=\"/note-editor\" component={CreateNote} />\n      <Route path=\"*\">\n        <Redirect to=\"/token\" />\n      </Route>\n    </Switch>\n  </Router>\n);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { App } from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}