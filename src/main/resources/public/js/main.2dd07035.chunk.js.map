{"version":3,"sources":["api/index.ts","api/transformers/index.ts","api/seniorities.ts","pages/search/Markdown.tsx","pages/search/Video.tsx","pages/search/SearchResult.tsx","pages/common/Loader.tsx","pages/search/index.tsx","pages/index/index.tsx","App.tsx","index.tsx"],"names":["api","axios","create","baseURL","paramsSerializer","qs","stringify","transformTopics","response","result","topicList","forEach","topic","parentId","parentIndex","findIndex","item","id","undefined","splice","depth","push","seniorities","Container","styled","div","Markdown","memo","input","dangerouslySetInnerHTML","__html","sanitize","marked","VideoContainer","timeToSeconds","split","hours","minutes","seconds","parseInt","Video","sourceLink","Infinity","start","end","parseTime","timePeriod","url","parsedUrl","URL","match","search","parse","slice","v","extractId","player","useRef","pausedOnce","handleProgress","useCallback","e","playedSeconds","current","getInternalPlayer","pauseVideo","ref","controls","onProgress","Subtitle","p","SpreadContainer","Breadcrumbs","Metadata","span","SearchResult","attributes","semantics","clarity","path","map","title","join","sourceAuthor","text","includes","Loader","loadingState","children","Search","seniority","useState","searchResults","setSearchResults","setLoadingState","useEffect","level","get","params","trim","then","data","knowledgeBlockList","catch","console","error","length","key","StyledForm","form","StyledLabel","label","StyledSelect","select","ClearButton","button","handleChange","updater","currentTarget","value","Index","history","useHistory","location","topics","setTopics","selectedTopic","setSelectedTopic","selectedSeniority","setSelectedSeniority","handleSubmit","preventDefault","queryObj","Object","entries","clearForm","onSubmit","onChange","disabled","repeat","onClick","to","GlobalStyle","createGlobalStyle","ReactDOM","render","component","document","getElementById"],"mappings":"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","file":"static/js/main.2dd07035.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport qs from \"qs\";\r\n\r\nimport { TopicsResponse } from \"./model/topics\";\r\nimport { KnowledgeBlockResponse } from \"./model/knowledgeBlocks\";\r\n\r\nconst api = axios.create({\r\n  baseURL: \"http://3.125.104.84:5000/api\",\r\n//   baseURL: \"http://localhost:5000/api\",\r\n  paramsSerializer: qs.stringify\r\n});\r\n\r\nexport const fetchTopics = () =>\r\n  api.get<TopicsResponse>(\"topics\").then(response => response.data);\r\n\r\nexport const fetchSearchResults = (title: string, level: string | undefined) =>\r\n  api\r\n    .get<KnowledgeBlockResponse>(\"knowledgeblocks\", {\r\n      params: { title: title.trim(), level }\r\n    })\r\n    .then(response => response.data.knowledgeBlockList);\r\n","import { TopicsResponse, ApiTopic } from \"../model/topics\";\r\n\r\nexport type Topic = ApiTopic & {\r\n  depth: number;\r\n};\r\n\r\nexport const transformTopics = (response: TopicsResponse): Array<Topic> => {\r\n  const result: Array<Topic> = [];\r\n\r\n  response.topicList.forEach(topic => {\r\n    if (!topic.parentId) {\r\n      result.push({\r\n        ...topic,\r\n        depth: 0\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    const parentIndex = result.findIndex(item => item.id === topic.parentId);\r\n\r\n    if (parentIndex !== undefined) {\r\n      result.splice(parentIndex + 1, 0, {\r\n        ...topic,\r\n        depth: result[parentIndex].depth + 1\r\n      });\r\n    }\r\n  });\r\n\r\n  return result;\r\n};\r\n","export const seniorities = [\"entry\", \"medium\", \"advanced\"];\r\n","import React, { memo } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport marked from \"marked\";\r\nimport { sanitize } from \"dompurify\";\r\n\r\nconst Container = styled.div`\r\n  * {\r\n    max-width: 100%;\r\n  }\r\n`;\r\n\r\ntype MarkdownProps = {\r\n  input: string;\r\n};\r\n\r\nexport const Markdown = memo(({ input }: MarkdownProps) => (\r\n  <Container dangerouslySetInnerHTML={{ __html: sanitize(marked(input)) }} />\r\n));\r\n","import React, { useCallback, useRef, memo } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport ReactPlayer, { ReactPlayerProps } from \"react-player\";\r\nimport qs from \"qs\";\r\n\r\nconst VideoContainer = styled.div`\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\ntype VideoProps = {\r\n  sourceLink: string;\r\n  timePeriod: string;\r\n};\r\n\r\nconst extractId = (url: string): string => {\r\n  let parsedUrl: URL;\r\n\r\n  try {\r\n    parsedUrl = new URL(url);\r\n  } catch {\r\n    // NOTE: @Stanko urls aren't parsed correctly\r\n    // [url](url) <- they arrive like that so I extract them here\r\n    parsedUrl = new URL(url.match(/[^[](\\S+)(?=\\])/gi)![0]);\r\n  }\r\n\r\n  const { search } = parsedUrl;\r\n\r\n  const { v } = qs.parse(search.slice(1));\r\n\r\n  return v as string;\r\n};\r\n\r\nconst timeToSeconds = (input: string): number => {\r\n  const [hours, minutes, seconds] = input.split(\":\");\r\n\r\n  return (\r\n    parseInt(hours, 10) * 60 * 60 +\r\n    parseInt(minutes, 10) * 60 +\r\n    parseInt(seconds, 10)\r\n  );\r\n};\r\n\r\nconst parseTime = (input: string): [number, number] => {\r\n  if (!input) {\r\n    return [0, Infinity];\r\n  }\r\n\r\n  const [start, end] = input.split(\" - \");\r\n\r\n  return [timeToSeconds(start), timeToSeconds(end)];\r\n};\r\n\r\n// TODO: optimize resource loading\r\nexport const Video = memo(({ sourceLink, timePeriod }: VideoProps) => {\r\n  const [start, end] = parseTime(timePeriod);\r\n  const id = extractId(sourceLink);\r\n\r\n  const player = useRef<ReactPlayer>(null);\r\n  const pausedOnce = useRef<boolean>(false);\r\n\r\n  const handleProgress = useCallback(\r\n    (e: Parameters<NonNullable<ReactPlayerProps[\"onProgress\"]>>[0]) => {\r\n      if (\r\n        e.playedSeconds > end &&\r\n        e.playedSeconds - end < 2 &&\r\n        !pausedOnce.current\r\n      ) {\r\n        (player.current?.getInternalPlayer() as YT.Player).pauseVideo();\r\n\r\n        pausedOnce.current = true;\r\n      }\r\n    },\r\n    [end, pausedOnce]\r\n  );\r\n\r\n  return (\r\n    <VideoContainer>\r\n      <ReactPlayer\r\n        ref={player}\r\n        url={`https://www.youtube.com/watch?v=${id}&start=${start}`}\r\n        controls\r\n        onProgress={handleProgress}\r\n      />\r\n    </VideoContainer>\r\n  );\r\n});\r\n","import React, { memo } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { KnowledgeBlock } from \"../../api/model/knowledgeBlocks\";\r\nimport { Markdown } from \"./Markdown\";\r\nimport { Video } from \"./Video\";\r\n\r\ntype SearchResultProps = {\r\n  result: KnowledgeBlock;\r\n};\r\n\r\nconst Container = styled.div`\r\n  border: 1px solid black;\r\n  padding: 10px;\r\n  border-radius: 8px;\r\n  margin-bottom: 15px;\r\n`;\r\n\r\nconst Subtitle = styled.p`\r\n  margin: 0;\r\n`;\r\n\r\nconst SpreadContainer = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst Breadcrumbs = styled.p`\r\n  opacity: 0.75;\r\n  font-size: 0.8em;\r\n  padding-bottom: 5px;\r\n  border-bottom: 1px solid black;\r\n`;\r\n\r\nconst Metadata = styled.span`\r\n  font-size: 0.7em;\r\n`;\r\n\r\nexport const SearchResult = memo(({ result }: SearchResultProps) => (\r\n  <Container>\r\n    <SpreadContainer>\r\n      <Subtitle>Category: {result.attributes.semantics}</Subtitle>\r\n      <Subtitle>Clarity: {result.attributes.clarity}</Subtitle>\r\n    </SpreadContainer>\r\n    <Breadcrumbs>{result.path.map(item => item.title).join(\" - \")}</Breadcrumbs>\r\n    <SpreadContainer>\r\n      {result.attributes.sourceAuthor && (\r\n        <Metadata>Author: {result.attributes.sourceAuthor}</Metadata>\r\n      )}\r\n      {result.attributes.timePeriod && (\r\n        <Metadata>Relevant section: {result.attributes.timePeriod}</Metadata>\r\n      )}\r\n    </SpreadContainer>\r\n    <Markdown input={result.text} />\r\n    {result.attributes.sourceLink?.includes(\"youtube.com\") && (\r\n      <Video\r\n        sourceLink={result.attributes.sourceLink}\r\n        timePeriod={result.attributes.timePeriod!}\r\n      />\r\n    )}\r\n  </Container>\r\n));\r\n","import React, { ReactNode } from \"react\";\r\nimport { LoadingState } from \"./types\";\r\n\r\ntype LoaderProps = {\r\n  loadingState: LoadingState;\r\n  children: ReactNode;\r\n};\r\n\r\nexport const Loader = ({ loadingState, children }: LoaderProps) => {\r\n  return (\r\n    <>\r\n      {loadingState === \"success\" ? (\r\n        children\r\n      ) : (\r\n        <p>\r\n          <em>\r\n            {loadingState === \"loading\" ? \"Loading...\" : \"An error ocurred :(\"}\r\n          </em>\r\n        </p>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import React, { useState, useEffect, memo } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { fetchSearchResults } from \"../../api\";\r\nimport { KnowledgeBlock } from \"../../api/model/knowledgeBlocks\";\r\nimport { SearchResult } from \"./SearchResult\";\r\nimport { LoadingState } from \"../common/types\";\r\nimport { Loader } from \"../common/Loader\";\r\n\r\nconst Container = styled.div`\r\n  margin: 0 auto;\r\n  width: 800px;\r\n`;\r\n\r\ntype SearchProps = {\r\n  topic: string;\r\n  seniority: string | undefined;\r\n};\r\n\r\nexport const Search = memo(({ topic, seniority }: SearchProps) => {\r\n  const [searchResults, setSearchResults] = useState<Array<KnowledgeBlock>>([]);\r\n  const [loadingState, setLoadingState] = useState<LoadingState>(\"loading\");\r\n\r\n  useEffect(() => {\r\n    fetchSearchResults(topic, seniority)\r\n      .then(setSearchResults)\r\n      .then(() => setLoadingState(\"success\"))\r\n      .catch(e => {\r\n        console.error(e);\r\n        setLoadingState(\"error\");\r\n      });\r\n  }, [topic, seniority]);\r\n\r\n  return (\r\n    <Container>\r\n      <Loader loadingState={loadingState}>\r\n        {searchResults.length > 0 ? (\r\n          searchResults.map(item => (\r\n            <SearchResult key={item.id} result={item} />\r\n          ))\r\n        ) : (\r\n          <p>\r\n            <em>No results found :(</em>\r\n          </p>\r\n        )}\r\n      </Loader>\r\n    </Container>\r\n  );\r\n});\r\n","import React, {\r\n  useEffect,\r\n  useState,\r\n  useCallback,\r\n  FormEvent,\r\n  SetStateAction,\r\n  Dispatch\r\n} from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Redirect, Route, Switch, useHistory } from \"react-router-dom\";\r\nimport qs from \"qs\";\r\n\r\nimport { fetchTopics } from \"../../api\";\r\nimport { transformTopics, Topic } from \"../../api/transformers\";\r\nimport { seniorities } from \"../../api/seniorities\";\r\nimport { Search } from \"../search\";\r\nimport { LoadingState } from \"../common/types\";\r\nimport { Loader } from \"../common/Loader\";\r\n\r\nconst StyledForm = styled.form`\r\n  border-bottom: 1px solid black;\r\n  padding-bottom: 15px;\r\n  margin-bottom: 15px;\r\n`;\r\n\r\nconst StyledLabel = styled.label`\r\n  display: block;\r\n  margin-bottom: 5px;\r\n`;\r\n\r\nconst StyledSelect = styled.select`\r\n  margin-left: 8px;\r\n  max-width: 60%;\r\n`;\r\n\r\nconst ClearButton = styled.button`\r\n  margin-left: 10px;\r\n`;\r\n\r\nconst handleChange = (updater: Dispatch<SetStateAction<string>>) => (\r\n  e: FormEvent<HTMLSelectElement>\r\n) => {\r\n  updater(e.currentTarget.value);\r\n};\r\n\r\nexport const Index = () => {\r\n  const history = useHistory();\r\n  const { topic, seniority } = qs.parse(history.location.search.slice(1));\r\n\r\n  const [topics, setTopics] = useState<Array<Topic>>([]);\r\n  const [selectedTopic, setSelectedTopic] = useState(topic ?? \"\");\r\n  const [loadingState, setLoadingState] = useState<LoadingState>(\"loading\");\r\n\r\n  const [selectedSeniority, setSelectedSeniority] = useState(seniority ?? \"\");\r\n\r\n  useEffect(() => {\r\n    fetchTopics()\r\n      .then(transformTopics)\r\n      .then(setTopics)\r\n      .then(() => setLoadingState(\"success\"))\r\n      .catch(e => {\r\n        console.error(e);\r\n        setLoadingState(\"error\");\r\n      });\r\n  }, []);\r\n\r\n  const handleSubmit = useCallback(\r\n    (e: FormEvent<HTMLFormElement>) => {\r\n      e.preventDefault();\r\n\r\n      const queryObj = {\r\n        topic: selectedTopic,\r\n        level: selectedSeniority\r\n      };\r\n\r\n      Object.entries(queryObj).forEach(([key, value]) => {\r\n        if (!value) {\r\n          delete queryObj[key as keyof typeof queryObj];\r\n        }\r\n      });\r\n\r\n      history.push(`/search?${qs.stringify(queryObj)}`);\r\n    },\r\n    [history, selectedSeniority, selectedTopic]\r\n  );\r\n\r\n  const clearForm = useCallback(() => {\r\n    setSelectedSeniority(\"\");\r\n    setSelectedTopic(\"\");\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <h1>Architect Notes</h1>\r\n      <Loader loadingState={loadingState}>\r\n        <StyledForm onSubmit={handleSubmit}>\r\n          <StyledLabel>\r\n            Select topic:\r\n            <StyledSelect\r\n              value={selectedTopic}\r\n              onChange={handleChange(setSelectedTopic)}\r\n            >\r\n              <option value=\"\" disabled>\r\n                Topic\r\n              </option>\r\n              {topics.map(topic => (\r\n                <option key={topic.id} value={topic.title}>\r\n                  {`${\"--\".repeat(topic.depth)} ${topic.title}`}\r\n                </option>\r\n              ))}\r\n            </StyledSelect>\r\n          </StyledLabel>\r\n          <StyledLabel>\r\n            Select seniority level:\r\n            <StyledSelect\r\n              value={selectedSeniority}\r\n              onChange={handleChange(setSelectedSeniority)}\r\n            >\r\n              <option value=\"\" disabled>\r\n                Seniority\r\n              </option>\r\n              {seniorities.map(seniority => (\r\n                <option key={seniority} value={seniority}>\r\n                  {seniority}\r\n                </option>\r\n              ))}\r\n            </StyledSelect>\r\n          </StyledLabel>\r\n          <div>\r\n            <button disabled={!selectedTopic}>Search</button>\r\n            <Route path=\"/search\">\r\n              <ClearButton onClick={clearForm}>Clear</ClearButton>\r\n            </Route>\r\n          </div>\r\n        </StyledForm>\r\n      </Loader>\r\n      <Switch>\r\n        <Route path=\"/search\">\r\n          {topic ? (\r\n            <Search topic={topic} seniority={seniority} />\r\n          ) : (\r\n            <Redirect to=\"/\" />\r\n          )}\r\n        </Route>\r\n        <Route path=\"*\">\r\n          <Redirect to=\"/\" />\r\n        </Route>\r\n      </Switch>\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { createGlobalStyle } from \"styled-components\";\n\nimport { Index } from \"./pages/index\";\n\nconst GlobalStyle = createGlobalStyle`\n  body {\n    font-family: Montserrat, 'sans-serif';\n  }\n`;\n\nexport const App = () => {\n  return (\n    <Router>\n      <GlobalStyle />\n      <Switch>\n        <Route path=\"/\" component={Index} />\n      </Switch>\n    </Router>\n  );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { App } from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}