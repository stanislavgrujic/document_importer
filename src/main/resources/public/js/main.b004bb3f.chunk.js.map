{"version":3,"sources":["api/index.ts","api/transformers/index.ts","api/seniorities.ts","pages/common/Loader.tsx","pages/search/Markdown.tsx","pages/search/Video.tsx","pages/search/SearchResult.tsx","pages/common/layout.ts","pages/knowledge-block/index.tsx","pages/search/index.tsx","pages/index/index.tsx","App.tsx","index.tsx"],"names":["api","axios","create","baseURL","paramsSerializer","qs","stringify","transformTopics","response","result","topicList","forEach","topic","parentId","parentIndex","findIndex","item","id","undefined","splice","title","trim","depth","push","seniorities","Loader","loadingState","children","Container","styled","div","Markdown","memo","input","dangerouslySetInnerHTML","__html","sanitize","marked","VideoContainer","Overlay","timeToSeconds","split","hours","minutes","seconds","parseInt","Video","sourceLink","timePeriod","useState","showVideo","setShowVideo","overlayClickHandler","useCallback","Infinity","start","end","parseTime","url","parsedUrl","URL","match","search","parse","slice","v","extractId","player","useRef","pausedOnce","handleProgress","e","playedSeconds","current","getInternalPlayer","pauseVideo","ref","controls","onProgress","onClick","Subtitle","p","SpreadContainer","Breadcrumbs","Metadata","span","SearchResult","attributes","semantics","to","path","map","join","sourceAuthor","text","includes","KnowledgeBlockComponent","useLocation","knowledgeBlock","setKnowledgeBlock","setLoadingState","useEffect","get","encodeURI","then","data","fetchKnowledgeBlock","catch","console","error","Search","seniority","searchResults","setSearchResults","params","level","toUpperCase","knowledgeBlockList","fetchSearchResults","length","key","StyledForm","form","StyledLabel","label","StyledSelect","select","ClearButton","button","handleChange","updater","currentTarget","value","Index","history","useHistory","location","topics","setTopics","selectedTopic","setSelectedTopic","selectedSeniority","setSelectedSeniority","handleSubmit","preventDefault","queryObj","Object","entries","clearForm","onSubmit","onChange","disabled","repeat","GlobalStyle","createGlobalStyle","ReactDOM","render","component","document","getElementById"],"mappings":"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","file":"static/js/main.b004bb3f.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport qs from \"qs\";\r\n\r\nimport {\r\n  KnowledgeBlock,\r\n  KnowledgeBlockResponse\r\n} from \"./model/knowledgeBlocks\";\r\nimport { TopicsResponse } from \"./model/topics\";\r\n\r\nconst api = axios.create({\r\n//   baseURL: \"http://3.125.104.84:5000/api\",\r\n  baseURL: \"http://localhost:5000/api\",\r\n  paramsSerializer: qs.stringify\r\n});\r\n\r\nexport const fetchTopics = () =>\r\n  api.get<TopicsResponse>(\"topics\").then(response => response.data);\r\n\r\nexport const fetchSearchResults = (\r\n  title: string,\r\n  seniority: string | undefined\r\n) =>\r\n  api\r\n    .get<KnowledgeBlockResponse>(\"knowledgeblocks\", {\r\n      params: { title, level: seniority?.toUpperCase() }\r\n    })\r\n    .then(response => response.data.knowledgeBlockList);\r\n\r\nexport const fetchKnowledgeBlock = (id: string) =>\r\n  api\r\n    .get<KnowledgeBlock>(`knowledgeblocks/${encodeURI(id)}`)\r\n    .then(response => response.data);\r\n","import { TopicsResponse, ApiTopic } from \"../model/topics\";\r\n\r\nexport type Topic = ApiTopic & {\r\n  depth: number;\r\n};\r\n\r\nexport const transformTopics = (response: TopicsResponse): Array<Topic> => {\r\n  const result: Array<Topic> = [];\r\n\r\n  response.topicList.forEach(topic => {\r\n    if (!topic.parentId) {\r\n      result.push({\r\n        ...topic,\r\n        title: topic.title.trim(),\r\n        depth: 0\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    const parentIndex = result.findIndex(item => item.id === topic.parentId);\r\n\r\n    if (parentIndex !== undefined) {\r\n      result.splice(parentIndex + 1, 0, {\r\n        ...topic,\r\n        title: topic.title.trim(),\r\n        depth: result[parentIndex].depth + 1\r\n      });\r\n    }\r\n  });\r\n\r\n  return result;\r\n};\r\n","export const seniorities = [\"entry\", \"medium\", \"advanced\"];\r\n","import React, { ReactNode } from \"react\";\r\nimport { LoadingState } from \"./types\";\r\n\r\ntype LoaderProps = {\r\n  loadingState: LoadingState;\r\n  children: ReactNode;\r\n};\r\n\r\nexport const Loader = ({ loadingState, children }: LoaderProps) => {\r\n  return (\r\n    <>\r\n      {loadingState === \"success\" ? (\r\n        children\r\n      ) : (\r\n        <p>\r\n          <em>\r\n            {loadingState === \"loading\" ? \"Loading...\" : \"An error ocurred :(\"}\r\n          </em>\r\n        </p>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import React, { memo } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport marked from \"marked\";\r\nimport { sanitize } from \"dompurify\";\r\n\r\nconst Container = styled.div`\r\n  * {\r\n    max-width: 100%;\r\n  }\r\n`;\r\n\r\ntype MarkdownProps = {\r\n  input: string;\r\n};\r\n\r\nexport const Markdown = memo(({ input }: MarkdownProps) => (\r\n  <Container dangerouslySetInnerHTML={{ __html: sanitize(marked(input)) }} />\r\n));\r\n","import React, { useCallback, useRef, memo, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport ReactPlayer, { ReactPlayerProps } from \"react-player\";\r\nimport qs from \"qs\";\r\n\r\nconst VideoContainer = styled.div`\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\ntype VideoProps = {\r\n  sourceLink: string;\r\n  timePeriod: string;\r\n};\r\n\r\nconst Overlay = styled.div`\r\n  width: 640px;\r\n  height: 360px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  background: black;\r\n  color: white;\r\n`;\r\n\r\nconst extractId = (url: string): string => {\r\n  let parsedUrl: URL;\r\n\r\n  try {\r\n    parsedUrl = new URL(url);\r\n  } catch {\r\n    // NOTE: @Stanko urls aren't parsed correctly\r\n    // [url](url) <- they arrive like that so I extract them here\r\n    parsedUrl = new URL(url.match(/[^[](\\S+)(?=])/gi)![0]);\r\n  }\r\n\r\n  const { search } = parsedUrl;\r\n\r\n  const { v } = qs.parse(search.slice(1));\r\n\r\n  return v as string;\r\n};\r\n\r\nconst timeToSeconds = (input: string): number => {\r\n  const [hours, minutes, seconds] = input.split(\":\");\r\n\r\n  return (\r\n    parseInt(hours, 10) * 60 * 60 +\r\n    parseInt(minutes, 10) * 60 +\r\n    parseInt(seconds, 10)\r\n  );\r\n};\r\n\r\nconst parseTime = (input: string): [number, number] => {\r\n  if (!input) {\r\n    return [0, Infinity];\r\n  }\r\n\r\n  const [start, end] = input.split(\" - \");\r\n\r\n  return [timeToSeconds(start), timeToSeconds(end)];\r\n};\r\n\r\n// TODO: optimize resource loading\r\nexport const Video = memo(({ sourceLink, timePeriod }: VideoProps) => {\r\n  const [showVideo, setShowVideo] = useState(false);\r\n\r\n  const overlayClickHandler = useCallback(() => {\r\n    setShowVideo(true);\r\n  }, [setShowVideo]);\r\n\r\n  const [start, end] = parseTime(timePeriod);\r\n  const id = extractId(sourceLink);\r\n\r\n  const player = useRef<ReactPlayer>(null);\r\n  const pausedOnce = useRef<boolean>(false);\r\n\r\n  const handleProgress = useCallback(\r\n    (e: Parameters<NonNullable<ReactPlayerProps[\"onProgress\"]>>[0]) => {\r\n      if (\r\n        e.playedSeconds > end &&\r\n        e.playedSeconds - end < 2 &&\r\n        !pausedOnce.current\r\n      ) {\r\n        (player.current?.getInternalPlayer() as YT.Player).pauseVideo();\r\n\r\n        pausedOnce.current = true;\r\n      }\r\n    },\r\n    [end, pausedOnce]\r\n  );\r\n\r\n  return (\r\n    <VideoContainer>\r\n      {showVideo ? (\r\n        <ReactPlayer\r\n          ref={player}\r\n          url={`https://www.youtube.com/watch?v=${id}&start=${start}`}\r\n          controls\r\n          onProgress={handleProgress}\r\n        />\r\n      ) : (\r\n        <Overlay onClick={overlayClickHandler}>Show video</Overlay>\r\n      )}\r\n    </VideoContainer>\r\n  );\r\n});\r\n","import React, { memo } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { KnowledgeBlock } from \"../../api/model/knowledgeBlocks\";\r\nimport { Markdown } from \"./Markdown\";\r\nimport { Video } from \"./Video\";\r\n\r\ntype SearchResultProps = {\r\n  result: KnowledgeBlock;\r\n};\r\n\r\nconst Container = styled.div`\r\n  border: 1px solid black;\r\n  padding: 10px;\r\n  border-radius: 8px;\r\n  margin-bottom: 15px;\r\n`;\r\n\r\nconst Subtitle = styled.p`\r\n  margin: 0;\r\n`;\r\n\r\nconst SpreadContainer = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst Breadcrumbs = styled.p`\r\n  opacity: 0.75;\r\n  font-size: 0.8em;\r\n  padding-bottom: 5px;\r\n  border-bottom: 1px solid black;\r\n`;\r\n\r\nconst Metadata = styled.span`\r\n  font-size: 0.7em;\r\n`;\r\n\r\nexport const SearchResult = memo(({ result }: SearchResultProps) => (\r\n  <Container>\r\n    <SpreadContainer>\r\n      <Subtitle>Category: {result.attributes.semantics}</Subtitle>\r\n      <Subtitle>\r\n        <Link to={`/knowledge-block?id=${result.id}`}>Permalink</Link>\r\n      </Subtitle>\r\n    </SpreadContainer>\r\n    <Breadcrumbs>\r\n      {result.path\r\n        .slice(1)\r\n        .map(item => item.title)\r\n        .join(\" - \")}\r\n    </Breadcrumbs>\r\n    <SpreadContainer>\r\n      {result.attributes.sourceAuthor && (\r\n        <Metadata>Author: {result.attributes.sourceAuthor}</Metadata>\r\n      )}\r\n      {result.attributes.timePeriod && (\r\n        <Metadata>Relevant section: {result.attributes.timePeriod}</Metadata>\r\n      )}\r\n    </SpreadContainer>\r\n    <Markdown input={result.text} />\r\n    {result.attributes.sourceLink?.includes(\"youtube.com\") && (\r\n      <Video\r\n        sourceLink={result.attributes.sourceLink}\r\n        timePeriod={result.attributes.timePeriod!}\r\n      />\r\n    )}\r\n  </Container>\r\n));\r\n","import styled from \"styled-components\";\r\n\r\nexport const Container = styled.div`\r\n  margin: 0 auto;\r\n  width: 800px;\r\n`;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport qs from \"qs\";\r\nimport { fetchKnowledgeBlock } from \"../../api\";\r\n\r\nimport { KnowledgeBlock } from \"../../api/model/knowledgeBlocks\";\r\nimport { Loader } from \"../common/Loader\";\r\nimport { LoadingState } from \"../common/types\";\r\nimport { SearchResult } from \"../search/SearchResult\";\r\nimport { Container } from \"../common/layout\";\r\n\r\nexport const KnowledgeBlockComponent = () => {\r\n  const { search } = useLocation();\r\n  const { id } = qs.parse(search.slice(1));\r\n\r\n  const [knowledgeBlock, setKnowledgeBlock] = useState<KnowledgeBlock | null>(\r\n    null\r\n  );\r\n  const [loadingState, setLoadingState] = useState<LoadingState>(\"loading\");\r\n\r\n  useEffect(() => {\r\n    fetchKnowledgeBlock(id)\r\n      .then(setKnowledgeBlock)\r\n      .then(() => setLoadingState(\"success\"))\r\n      .catch(e => {\r\n        console.error(e);\r\n        setLoadingState(\"error\");\r\n      });\r\n  }, [id]);\r\n\r\n  return (\r\n    <Container>\r\n      <Loader loadingState={loadingState}>\r\n        <SearchResult result={knowledgeBlock!} />\r\n      </Loader>\r\n    </Container>\r\n  );\r\n};\r\n","import React, { memo, useEffect, useState } from \"react\";\r\n\r\nimport { fetchSearchResults } from \"../../api\";\r\nimport { KnowledgeBlock } from \"../../api/model/knowledgeBlocks\";\r\nimport { Container } from \"../common/layout\";\r\nimport { Loader } from \"../common/Loader\";\r\nimport { LoadingState } from \"../common/types\";\r\nimport { SearchResult } from \"./SearchResult\";\r\n\r\ntype SearchProps = {\r\n  topic: string;\r\n  seniority: string | undefined;\r\n};\r\n\r\nexport const Search = memo(({ topic, seniority }: SearchProps) => {\r\n  const [searchResults, setSearchResults] = useState<Array<KnowledgeBlock>>([]);\r\n  const [loadingState, setLoadingState] = useState<LoadingState>(\"loading\");\r\n\r\n  useEffect(() => {\r\n    fetchSearchResults(topic, seniority)\r\n      .then(setSearchResults)\r\n      .then(() => setLoadingState(\"success\"))\r\n      .catch(e => {\r\n        console.error(e);\r\n        setLoadingState(\"error\");\r\n      });\r\n  }, [topic, seniority]);\r\n\r\n  return (\r\n    <Container>\r\n      <Loader loadingState={loadingState}>\r\n        {searchResults.length > 0 ? (\r\n          searchResults.map(item => (\r\n            <SearchResult key={item.id} result={item} />\r\n          ))\r\n        ) : (\r\n          <p>\r\n            <em>No results found :(</em>\r\n          </p>\r\n        )}\r\n      </Loader>\r\n    </Container>\r\n  );\r\n});\r\n","import React, {\r\n  useEffect,\r\n  useState,\r\n  useCallback,\r\n  FormEvent,\r\n  SetStateAction,\r\n  Dispatch\r\n} from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Redirect, Route, Switch, useHistory } from \"react-router-dom\";\r\nimport qs from \"qs\";\r\n\r\nimport { fetchTopics } from \"../../api\";\r\nimport { transformTopics, Topic } from \"../../api/transformers\";\r\nimport { seniorities } from \"../../api/seniorities\";\r\nimport { KnowledgeBlockComponent } from \"../knowledge-block\";\r\nimport { Search } from \"../search\";\r\nimport { LoadingState } from \"../common/types\";\r\nimport { Loader } from \"../common/Loader\";\r\n\r\nconst StyledForm = styled.form`\r\n  border-bottom: 1px solid black;\r\n  padding-bottom: 15px;\r\n  margin-bottom: 15px;\r\n`;\r\n\r\nconst StyledLabel = styled.label`\r\n  display: block;\r\n  margin-bottom: 5px;\r\n`;\r\n\r\nconst StyledSelect = styled.select`\r\n  margin-left: 8px;\r\n  max-width: 60%;\r\n`;\r\n\r\nconst ClearButton = styled.button`\r\n  margin-left: 10px;\r\n`;\r\n\r\nconst handleChange = (updater: Dispatch<SetStateAction<string>>) => (\r\n  e: FormEvent<HTMLSelectElement>\r\n) => {\r\n  updater(e.currentTarget.value);\r\n};\r\n\r\nexport const Index = () => {\r\n  const history = useHistory();\r\n  const { topic, seniority } = qs.parse(history.location.search.slice(1));\r\n\r\n  const [topics, setTopics] = useState<Array<Topic>>([]);\r\n  const [selectedTopic, setSelectedTopic] = useState(topic ?? \"\");\r\n  const [loadingState, setLoadingState] = useState<LoadingState>(\"loading\");\r\n\r\n  const [selectedSeniority, setSelectedSeniority] = useState(seniority ?? \"\");\r\n\r\n  useEffect(() => {\r\n    fetchTopics()\r\n      .then(transformTopics)\r\n      .then(setTopics)\r\n      .then(() => setLoadingState(\"success\"))\r\n      .catch(e => {\r\n        console.error(e);\r\n        setLoadingState(\"error\");\r\n      });\r\n  }, []);\r\n\r\n  const handleSubmit = useCallback(\r\n    (e: FormEvent<HTMLFormElement>) => {\r\n      e.preventDefault();\r\n\r\n      const queryObj = {\r\n        topic: selectedTopic,\r\n        seniority: selectedSeniority\r\n      };\r\n\r\n      Object.entries(queryObj).forEach(([key, value]) => {\r\n        if (!value) {\r\n          delete queryObj[key as keyof typeof queryObj];\r\n        }\r\n      });\r\n\r\n      history.push(`/search?${qs.stringify(queryObj)}`);\r\n    },\r\n    [history, selectedSeniority, selectedTopic]\r\n  );\r\n\r\n  const clearForm = useCallback(() => {\r\n    setSelectedSeniority(\"\");\r\n    setSelectedTopic(\"\");\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <h1>Architect Notes</h1>\r\n      <Loader loadingState={loadingState}>\r\n        <StyledForm onSubmit={handleSubmit}>\r\n          <StyledLabel>\r\n            Select topic:\r\n            <StyledSelect\r\n              value={selectedTopic}\r\n              onChange={handleChange(setSelectedTopic)}\r\n            >\r\n              <option value=\"\" disabled>\r\n                Topic\r\n              </option>\r\n              {topics.map(topic => (\r\n                <option key={topic.id} value={topic.title}>\r\n                  {`${\"--\".repeat(topic.depth)} ${topic.title}`}\r\n                </option>\r\n              ))}\r\n            </StyledSelect>\r\n          </StyledLabel>\r\n          <StyledLabel>\r\n            Select seniority level:\r\n            <StyledSelect\r\n              value={selectedSeniority}\r\n              onChange={handleChange(setSelectedSeniority)}\r\n            >\r\n              <option value=\"\" disabled>\r\n                Seniority\r\n              </option>\r\n              {seniorities.map(seniority => (\r\n                <option key={seniority} value={seniority}>\r\n                  {seniority}\r\n                </option>\r\n              ))}\r\n            </StyledSelect>\r\n          </StyledLabel>\r\n          <div>\r\n            <button disabled={!selectedTopic}>Search</button>\r\n            <Route path=\"/search\">\r\n              <ClearButton onClick={clearForm}>Clear</ClearButton>\r\n            </Route>\r\n          </div>\r\n        </StyledForm>\r\n      </Loader>\r\n      <Switch>\r\n        <Route path=\"/search\">\r\n          {topic ? (\r\n            <Search topic={topic} seniority={seniority} />\r\n          ) : (\r\n            <Redirect to=\"/\" />\r\n          )}\r\n        </Route>\r\n        <Route path=\"/knowledge-block\">\r\n          <KnowledgeBlockComponent />\r\n        </Route>\r\n        <Route path=\"*\">\r\n          <Redirect to=\"/\" />\r\n        </Route>\r\n      </Switch>\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { createGlobalStyle } from \"styled-components\";\n\nimport { Index } from \"./pages/index\";\n\nconst GlobalStyle = createGlobalStyle`\n  body {\n    font-family: Montserrat, 'sans-serif';\n  }\n`;\n\nexport const App = () => {\n  return (\n    <Router>\n      <GlobalStyle />\n      <Switch>\n        <Route path=\"/\" component={Index} />\n      </Switch>\n    </Router>\n  );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { App } from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}